<div class="container">
  <header>
    <h1>{{ title() }}</h1>
    <p>Connected to .NET Core Weather API</p>
  </header>

  <main>
    <section class="weather-section">
      <div class="section-header">
        <h2>Weather Forecast</h2>
        <button (click)="loadWeatherData()" class="refresh-btn" [disabled]="loading()">
          {{ loading() ? 'Loading...' : 'Refresh' }}
        </button>
      </div>

      @if (loading()) {
      <div class="loading">
        <div class="spinner"></div>
        <p>Loading weather data...</p>
      </div>
      } @if (error()) {
      <div class="error">
        <h3>Error Loading Weather Data</h3>
        <p>{{ error() }}</p>
        <p>Make sure the backend API is running at <code>https://localhost:7247</code></p>
      </div>
      } @if (!loading() && !error() && weatherData().length > 0) {
      <div class="weather-grid">
        @for (forecast of weatherData(); track forecast.date) {
        <div class="weather-card">
          <div class="date">{{ forecast.date | date : 'MMM dd, yyyy' }}</div>
          <div class="temperature">
            <span class="temp-c">{{ forecast.temperatureC }}°C</span>
            <span class="temp-f">{{ forecast.temperatureF }}°F</span>
          </div>
          <div class="summary">{{ forecast.summary }}</div>
        </div>
        }
      </div>
      }
    </section>
  </main>
</div>

<router-outlet />
